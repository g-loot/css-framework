/*----------------------------*/
/* TOOLTIP */
/*----------------------------*/

:where(.tooltip, [data-tooltip]:not([data-tooltip=""])) {
  @apply
  relative
  cursor-pointer
  ;

  &:hover {
    @apply
    z-50
    ;
  }

  &::after,
  > blockquote {
    @apply
    bg-ui-600/95
    border
    border-ui-400/20
    rounded-2
    transition
    duration-200
    ease-in-out
    absolute
    backdrop-blur-sm
    transform-gpu
    z-10
    opacity-0
    font-normal
    text-sm
    text-ui-200
    shadow-lg
  }

  &:not([data-tooltip]:not([data-tooltip=""])) {
    > blockquote {
      @apply
      max-w-[16rem]
      w-full
      top-auto
      bottom-[100%]
      -translate-x-[calc(16rem/2)]
      translate-y-0.5
      ;
    }

    > *:hover {
      ~ blockquote {
        @apply
        opacity-100
        -translate-y-0.5
        ;
      }
    }
  }

  &[data-tooltip]:not([data-tooltip=""]) {
    &::after {
      @apply
      content-[attr(data-tooltip)]
      font-body
      font-normal
      text-sm
      block
      right-auto
      left-[50%]
      top-auto
      bottom-[100%]
      py-2
      px-3
      pointer-events-none
      leading-tight
      -translate-x-[50%]
      translate-y-0.5
      max-w-[20rem]
      w-[max-content]
      ;
    }

    &:hover {
      &::after {
        @apply
        opacity-100
        -translate-y-0.5
        ;
      }
    }
  }
}

/* position */

@define-mixin tooltip-top {
  & {
    &::after {
      @apply
      right-auto
      left-[50%]
      top-auto
      bottom-[100%]
      translate-y-0.5
      ;
    }
    &:hover {
      &::after {
        @apply
        -translate-y-0.5
        ;
      }
    }
  }
}
@define-mixin tooltip-right {
  & {
    &::after {
      @apply
      top-auto
      bottom-[50%]
      left-[100%]
      -translate-x-1
      translate-y-[50%]
      ;
    }
    &:hover {
      &::after {
        @apply
        translate-x-1
        ;
      }
    }
  }
}
@define-mixin tooltip-bottom {
  & {
    &::after {
      @apply
      bottom-auto
      top-[100%]
      -translate-y-1
      ;
    }
    &:hover {
      &::after {
        @apply
        translate-y-1
        ;
      }
    }
  }
}
@define-mixin tooltip-left {
  & {
    &::after {
      @apply
      top-auto
      bottom-[50%]
      right-[100%]
      left-auto
      translate-x-1
      translate-y-[50%]
      ;
    }
    &:hover {
      &::after {
        @apply
        -translate-x-1
        ;
      }
    }
  }
}

[data-tooltip]:not([data-tooltip=""]) {
  &.tooltip-top {
    @mixin tooltip-top;
  }
  &.tooltip-bottom {
    @mixin tooltip-bottom;
  }
  &.tooltip-right {
    @mixin tooltip-right;
  }
  &.tooltip-left {
    @mixin tooltip-left;
  }
}

/* loading */

.tooltip-container {
  @apply
  rounded-2
  overflow-hidden
  bg-ui-600
  text-ui-200
  border
  border-ui-400/20
  !p-0
  z-[99999]
  shadow-lg
  ;

  > * {
    @apply
    transition-opacity
    duration-1000;
  }
  &:not(.is-loading) {
    > * {
      @apply
      opacity-100;
    }
  }

  &.is-loading {
    @apply 
    pointer-events-none
    bg-ui-600/95
    bg-[length:800px_100%]
    bg-[-200%_center]
    bg-no-repeat
    animate-[tooltip-loader_1s_linear_infinite]
    opacity-100
    transition-none
    ;
    background-image: linear-gradient(
      to right,
      rgba(var(--color-ui-600) / 0%) 8%,
      rgba(var(--color-ui-500) / 100%) 18%,
      rgba(var(--color-ui-600) / 0%) 33%
    );
    &,
    *,
    [class*="text-"] {
      @apply 
      !text-ui-800/0;
    }
    * {
      @apply
      !opacity-0
      !bg-ui-800/0
      ;
    }
  }
}

@keyframes tooltip-loader {
  0% {
    background-position: -900px 0;
  }
  100% {
    background-position: 900px 0;
  }
}

/* tooltip attention */

@define-mixin tooltip-attention-top {
  & {
    &::before {
      @apply
      border-t-8
      border-x-8
      border-b-0
      border-ui-900/0
      border-t-main
      animate-bounce
      translate-y-0
      -translate-x-[50%]
      top-auto
      right-auto
      left-[calc(50%-0.5rem)]
      bottom-[calc(100%+0.5rem)]
      ;
    }
    &::after {
      @apply
      -translate-x-[50%]
      -translate-y-6
      ;
    }
  }
}
@define-mixin tooltip-attention-right {
  & {
    &::before {
      @apply
      border-r-8
      border-y-8
      border-l-0
      border-ui-900/0
      border-r-main
      animate-bounce-left
      top-auto
      right-auto
      bottom-[calc(50%-0.5rem)]
      left-[calc(100%+0.5rem)]
      translate-x-0
      translate-y-0
      ;
    }
    &::after {
      @apply
      translate-y-[50%]
      translate-x-6
      ;
    }
  }
}
@define-mixin tooltip-attention-bottom {
  & {
    &::before {
      @apply
      border-b-8
      border-x-8
      border-t-0
      border-ui-900/0
      border-b-main
      animate-bounce
      translate-y-0
      -translate-x-[50%]
      bottom-auto
      right-auto
      left-[calc(50%-0.5rem)]
      top-[calc(100%+0.5rem)]
      ;
    }
    &::after {
      @apply
      -translate-x-[50%]
      translate-y-6
      ;
    }
  }
}
@define-mixin tooltip-attention-left {
  & {
    &::before {
      @apply
      border-l-8
      border-y-8
      border-r-0
      border-ui-900/0
      border-l-main
      animate-bounce-right
      top-auto
      left-auto
      bottom-[calc(50%-0.5rem)]
      right-[calc(100%+0.5rem)]
      translate-x-0
      translate-y-0
      ;
    }
    &::after {
      @apply
      translate-y-[50%]
      -translate-x-6
      ;
    }
  }
}

[data-tooltip]:not([data-tooltip=""]) {
  &.tooltip-attention {
    @apply
    outline
    -outline-offset-1
    outline-1
    outline-main
    rounded
    inline-block
    ;
    &:has(.button) {
      @apply
      rounded-full
      ;
    }
    &::before {
      @apply
      content-['']
      absolute
      z-20
      pointer-events-none
      w-0
      h-0
      border-solid
      ;
    }
    &::after {
      @apply
      opacity-100
      bg-ui-600/75
      animate-fade-in
      text-main
      ;
    }
    &.tooltip-top {
      @mixin tooltip-attention-top;
    }
    &.tooltip-right {
      @mixin tooltip-attention-right;
    }
    &.tooltip-bottom {
      @mixin tooltip-attention-bottom;
    }
    &.tooltip-left {
      @mixin tooltip-attention-left;
    }
  }
}

/* large tooltip */

.tooltip-lg {
  @apply
  bg-ui-600/95
  rounded
  backdrop-blur-sm
  transform-gpu
  p-2
  leading-none
  transition-all
  duration-200
  ease-in-out
  opacity-0
  text-sm
  shadow-lg
  ;

  &.is-active {
    @apply
    opacity-100
    ;
  }

  &.tooltip-bottom {
    @apply
    -translate-y-1
    opacity-0
    ;
    &.is-active {
      @apply
      animate-[tooltip-bottom_200ms_ease-in-out_forwards];
    }
  }
  &.tooltip-top {
    @apply
    translate-y-1
    opacity-0
    ;
    &.is-active {
      @apply
      animate-[tooltip-top_200ms_ease-in-out_forwards];
    }
  }
  &.tooltip-right {
    @apply
    -translate-x-1
    opacity-0
    ;
    &.is-active {
      @apply
      animate-[tooltip-right_200ms_ease-in-out_forwards];
    }
  }
  &.tooltip-left {
    @apply
    translate-x-1
    opacity-0
    ;
    &.is-active {
      @apply
      animate-[tooltip-left_200ms_ease-in-out_forwards];
    }
  }
}

@keyframes tooltip-bottom {
  from {
    transform: translateY(-0.25rem);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
@keyframes tooltip-top {
  from {
    transform: translateY(0.25rem);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
@keyframes tooltip-right {
  from {
    transform: translateX(-0.25rem);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
@keyframes tooltip-left {
  from {
    transform: translateX(0.25rem);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
/* responsive positioning */

@screen sm {
	.tooltip[data-tooltip]:not([data-tooltip=""]) {
    &.sm\:tooltip-top {
      @mixin tooltip-top;
    }
    &.sm\:tooltip-right {
      @mixin tooltip-right;
    }
    &.sm\:tooltip-bottom {
      @mixin tooltip-bottom;
    }
    &.sm\:tooltip-left {
      @mixin tooltip-left;
    }
    
    &.tooltip-attention {
      &.sm\:tooltip-top {
        @mixin tooltip-attention-top;
      }
      &.sm\:tooltip-right {
        @mixin tooltip-attention-right;
      }
      &.sm\:tooltip-bottom {
        @mixin tooltip-attention-bottom;
      }
      &.sm\:tooltip-left {
        @mixin tooltip-attention-left;
      }
    }
  }
}
@screen md {
	.tooltip[data-tooltip]:not([data-tooltip=""]) {
    &.md\:tooltip-top {
      @mixin tooltip-top;
    }
    &.md\:tooltip-right {
      @mixin tooltip-right;
    }
    &.md\:tooltip-bottom {
      @mixin tooltip-bottom;
    }
    &.md\:tooltip-left {
      @mixin tooltip-left;
    }
    
    &.tooltip-attention {
      &.md\:tooltip-top {
        @mixin tooltip-attention-top;
      }
      &.md\:tooltip-right {
        @mixin tooltip-attention-right;
      }
      &.md\:tooltip-bottom {
        @mixin tooltip-attention-bottom;
      }
      &.md\:tooltip-left {
        @mixin tooltip-attention-left;
      }
    }
  }
}
@screen lg {
	.tooltip[data-tooltip]:not([data-tooltip=""]) {
    &.lg\:tooltip-top {
      @mixin tooltip-top;
    }
    &.lg\:tooltip-right {
      @mixin tooltip-right;
    }
    &.lg\:tooltip-bottom {
      @mixin tooltip-bottom;
    }
    &.lg\:tooltip-left {
      @mixin tooltip-left;
    }
    
    &.tooltip-attention {
      &.lg\:tooltip-top {
        @mixin tooltip-attention-top;
      }
      &.lg\:tooltip-right {
        @mixin tooltip-attention-right;
      }
      &.lg\:tooltip-bottom {
        @mixin tooltip-attention-bottom;
      }
      &.lg\:tooltip-left {
        @mixin tooltip-attention-left;
      }
    }
  }
}
@screen xl {
	.tooltip[data-tooltip]:not([data-tooltip=""]) {
    &.xl\:tooltip-top {
      @mixin tooltip-top;
    }
    &.xl\:tooltip-right {
      @mixin tooltip-right;
    }
    &.xl\:tooltip-bottom {
      @mixin tooltip-bottom;
    }
    &.xl\:tooltip-left {
      @mixin tooltip-left;
    }
    
    &.tooltip-attention {
      &.xl\:tooltip-top {
        @mixin tooltip-attention-top;
      }
      &.xl\:tooltip-right {
        @mixin tooltip-attention-right;
      }
      &.xl\:tooltip-bottom {
        @mixin tooltip-attention-bottom;
      }
      &.xl\:tooltip-left {
        @mixin tooltip-attention-left;
      }
    }
  }
}