/*----------------------------*/
/* CHAT */
/*----------------------------*/

.chat {
  &,
  * {
    --scroll-behavior: auto;
  }
  @apply
  overflow-x-hidden
  ;
}

.chat-feed {
  @apply
  overflow-y-hidden
  md:overflow-y-auto
  overflow-x-hidden
  scrollbar-desktop
  ;
}

.chat-group {
  @apply
  flex
  items-start
  px-2
  lg:px-4
  py-8
  relative
  ;
  .chat-messages {
    @apply
    lg:max-w-[60%]
    flex
    flex-col
    gap-4
    ;
    .chat-message {
      @apply
      flex
      gap-2
      items-center
      relative
      hover:z-20
      ;
      &:hover {
        .chat-action-hidden {
          @apply
          opacity-100
          ;
        }
      }
    }
  }
  &:not(.is-owner) {
    @apply
    text-left
    ;
    .chat-author {
      > time {
        @apply
        left-[calc(100%+1rem)]
        ;
      }
    }
    .chat-messages {
      @apply
      pl-2
      lg:pl-4
      ;
      .chat-message {
        .chat-bubble {
          @apply
          bg-ui-600
          rounded-tl-sm
          ;
        }
        &:last-child {
          .chat-bubble {
            &,
            img {
              
            }
          }
        }
      }
    }
  } 
  &.is-owner {
    @apply
    text-right
    flex-row-reverse
    ;
    .chat-author {
      > time {
        @apply
        right-[calc(100%+1rem)]
        ;
      }
    }
    .chat-messages {
      @apply
      pr-2
      lg:pr-4
      items-end
      ;
      .chat-message {
        @apply
        flex-row-reverse
        ;
        .chat-bubble {
          @apply
          bg-main
          text-ui-800
          rounded-br-sm
          ;
        }
        &:last-child {
          .chat-bubble {
            &,
            img {
              
            }
          }
        }
      }
    }
    .chat-actions {
      @apply
      flex-row-reverse
      ;
    }
  }
  &:last-child {
    @apply
    pb-44
    xl:pb-20
    ;
  }
}
@media only screen and (max-width: 768px) {
  .chat-group:not(.is-owner) {
    .dropdown.dropdown-center {
      .dropdown-content {
        @apply
        right-0
        left-auto
        translate-x-0
        ;
      }
    }
  }
  .chat-group.is-owner {
    .dropdown.dropdown-center {
      .dropdown-content {
        @apply
        left-0
        right-auto
        translate-x-0
        ;
      }
    }
  }
}


.chat-author {
  @apply
  relative
  ;
  > time {
    @apply
    absolute
    -bottom-7
    ;
  }
  > .avatar {
    @apply
    -mb-6
    shrink-0
    ;
  }
}

.chat-messages,
.chat-author {
  time {
    @apply
    whitespace-nowrap
    text-xs
    text-ui-300
    transition-colors
    duration-200
    ease-in-out
    hover:text-ui-200
    ;
  }
}

.chat-bubble {
  @apply
  bg-ui-600
  max-w-[max-content]
  relative
  z-0
  min-w-[fit-content]
  ;
  &,
  img {
    @apply
    rounded-3xl
    ;
  }
  img {
    @apply
    max-w-[75vw]
    lg:max-w-xs
    ;
  }
  &:not(.chat-bubble-image) {
    @apply
    px-4
    py-3
    ;
  }
  .chat-bubble-actions {
    @apply
    absolute
    -bottom-3
    right-1
    flex
    justify-end
    gap-1
    items-center
    ;
  }
  .chat-bubble-reactions {
    @apply
    
    -bottom-3
    right-1
    flex
    items-center
    gap-0.5
    ;
    > div {
      @apply
      bg-gradient-radial-spotlight
      from-ui-400
      to-ui-500
      rounded-full
      text-ui-200
      px-1.5
      py-1
      flex
      items-center
      gap-1
      text-sm
      leading-none
      after:bg-ui-500
      ;
      &.is-owner {
        @apply
        from-interaction-300
        to-interaction-700
        ;
      }
    } 
  }
}

.chat-actions {
  @apply
  flex
  items-center
  relative
  z-10
  ;
  .chat-action-hidden {
    @apply
    opacity-0
    transition-opacity
    duration-200
    ease-in-out
    ;
  }
}

.chat-footer {
  @apply
  flex
  items-center
  gap-2
  p-2
  border-t
  border-ui-700
  bg-ui-800
  ;
  > .form-group {
    @apply
    flex-1
    ;
  }
}

.chat.chat-responsive {
  .chat-footer {
    @apply
    fixed
    inset-x-0
    bottom-0
    xl:relative
    ;
    z-index: 10000;
  }
}

.chat-bubble {
  &.is-writting {
    @apply
    p-0
    ;

    > div {
      @apply
      relative
      h-12
      w-24
      flex
      items-center
      justify-center
      ;

    }    
  }
}